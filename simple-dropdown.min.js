;(function($,e,i,a){var t="simpleDropdown",s={propertyName:"value"};function d(e,i){this.element=e;this.jqElem=$(e);this.options=$.extend({},s,i);this._defaults=s;this._name=t;if(!this.jqElem.is(".dropasaurusised, .simple-dd-generated"))this.init()}d.prototype={init:function(){$.addBody();var a=this.jqElem;var t=this.jqElem;a.each(function(){var a=$(this);var s=a.find("ul");var d=s.parent();var l=s.remove();$(".body").append(l);l.wrap('<div class="simple-dd simple-dd-generated '+(a.is(".pin-right")?"pin-right":"")+'"'+'     id="'+a.data("id")+'"></div>');$(e).on("resize",function(){var e={position:"absolute",top:d.offset().top+d.height()};if(a.is(".pin-right")){e["left"]=d.offset().left-l.outerWidth()+d.outerWidth()}else{e["left"]=d.offset().left}l.parent().css(e)});var f=-1;a.find("a").first().click(function(i){i.preventDefault();i.stopPropagation();f=-1;if($("#"+a.data("id")).hasClass("active")){$(".simple-dd").removeClass("active");t.removeClass("active");return}$(".simple-dd").removeClass("active");a.trigger("probable_change");$("#"+a.data("id")).toggleClass("active");t.toggleClass("active");$(e).trigger("resize")});$("html").click(function(e){$(".simple-dd").removeClass("active")});var n=false;$(i).keyup(function(e){if(e.keyCode==16){n=false}});$(i).keydown(function(e){if(e.keyCode==16){n=true}else if(e.keyCode==40){if($("#"+a.data("id")).hasClass("active")){e.preventDefault();var i=$("#"+a.data("id")).find("a");if(f<i.length-1){f++}var t=i[f];t.focus()}}else if(e.keyCode==9){if($("#"+a.data("id")).hasClass("active")){var i=$("#"+a.data("id")).find("a");if(f<i.length-1&&!n){f++;var t=i[f];t.focus();e.preventDefault()}else if(n){if(f>0){f--;var t=i[f];t.focus()}else{f--;$(".simple-dd").removeClass("active");a.find("a").first().focus()}e.preventDefault()}else{f++;if(a.data("next")){$(a.data("next")).find("a").focus();$(".simple-dd").removeClass("active");e.preventDefault()}else{a.find("a").focus();$(".simple-dd").removeClass("active")}}}}else if(e.keyCode==38){if($("#"+a.data("id")).hasClass("active")){e.preventDefault();var i=$("#"+a.data("id")).find("a");if(f>0){f--}var t=i[f];t.focus()}}else if(e.keyCode==27){if($("#"+a.data("id")).hasClass("active")){$(".simple-dd").removeClass("active")}}})});this.jqElem.addClass("dropasaurusised")}};$.fn[t]=function(e){return this.each(function(){if(!$.data(this,"plugin_"+t)){$.data(this,"plugin_"+t,new d(this,e))}})}})(jQuery,window,document);
