;(function($,e,a,i){var t="simpleDropdown",s={propertyName:"value"};function d(e,a){this.element=e;this.jqElem=$(e);this.options=$.extend({},s,a);this._defaults=s;this._name=t;if(!this.jqElem.is(".dropasaurusised, .simple-dd-generated"))this.init()}d.prototype={init:function(){$.addBody();var e=this.jqElem;var i=this.jqElem;e.each(function(){var e=$(this);var i=e.find("ul");y=i.parent();var t=i.remove();$(".body").append(t);t.wrap('<div class="simple-dd simple-dd-generated" id="'+e.data("id")+'"></div>');t.parent().css({position:"absolute",top:y.offset().top+y.height(),left:y.offset().left});var s=-1;e.find("a").first().click(function(a){a.preventDefault();a.stopPropagation();s=-1;if($("#"+e.data("id")).hasClass("active")){$(".simple-dd").removeClass("active");return}$(".simple-dd").removeClass("active");e.trigger("probable_change");$("#"+e.data("id")).toggleClass("active")});$("html").click(function(e){$(".simple-dd").removeClass("active")});var d=false;$(a).keyup(function(e){if(e.keyCode==16){d=false}});$(a).keydown(function(a){if(a.keyCode==16){d=true}else if(a.keyCode==40){if($("#"+e.data("id")).hasClass("active")){a.preventDefault();var i=$("#"+e.data("id")).find("a");if(s<i.length-1){s++}var t=i[s];t.focus()}}else if(a.keyCode==9){if($("#"+e.data("id")).hasClass("active")){var i=$("#"+e.data("id")).find("a");if(s<i.length-1&&!d){s++;var t=i[s];t.focus();a.preventDefault()}else if(d){if(s>0){s--;var t=i[s];t.focus()}else{s--;$(".simple-dd").removeClass("active");e.find("a").first().focus()}a.preventDefault()}else{s++;if(e.data("next")){$(e.data("next")).find("a").focus();$(".simple-dd").removeClass("active");a.preventDefault()}else{e.find("a").focus();$(".simple-dd").removeClass("active")}}}}else if(a.keyCode==38){if($("#"+e.data("id")).hasClass("active")){a.preventDefault();var i=$("#"+e.data("id")).find("a");if(s>0){s--}var t=i[s];t.focus()}}else if(a.keyCode==27){if($("#"+e.data("id")).hasClass("active")){$(".simple-dd").removeClass("active")}}})});this.jqElem.addClass("dropasaurusised")}};$.fn[t]=function(e){return this.each(function(){if(!$.data(this,"plugin_"+t)){$.data(this,"plugin_"+t,new d(this,e))}})}})(jQuery,window,document);
