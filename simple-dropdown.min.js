;(function($,e,i,t){var a="simpleDropdown",s={touchBody:true};function d(e,i){this.element=e;this.jqElem=$(e);this.options=$.extend({},s,i);this._defaults=s;this._name=a;if(!this.jqElem.is(".dropasaurusised, .simple-dd-generated"))this.init()}d.prototype={scrollElem:function(){return $(".body").length?$(".body"):$(e)},init:function(){if(this.options.touchBody)$.addBody();var t=this.jqElem,a=this,s=this.jqElem;t.each(function(){var t=$(this);var d=t.find("ul");var l=d.parent();var n=d.remove();a.scrollElem().append(n);n.wrap('<div class="simple-dd simple-dd-generated '+(t.is(".pin-right")?"pin-right":"")+'"'+'     id="'+t.data("id")+'"></div>');$(e).on("resize",function(){var e={position:"absolute",top:l.offset().top+l.height()};if(t.is(".pin-right")){e["left"]=l.offset().left-n.outerWidth()+l.outerWidth()}else{e["left"]=l.offset().left}n.parent().css(e)});var o=-1;t.find("a").first().click(function(i){i.preventDefault();i.stopPropagation();o=-1;if($("#"+t.data("id")).hasClass("active")){$(".simple-dd").removeClass("active");s.removeClass("active");return}$(".simple-dd").removeClass("active");t.trigger("probable_change");$("#"+t.data("id")).toggleClass("active");s.toggleClass("active");$(e).trigger("resize")});$("html").click(function(e){$(".simple-dd").removeClass("active")});var f=false;$(i).keyup(function(e){if(e.keyCode==16){f=false}});$(i).keydown(function(e){if(e.keyCode==16){f=true}else if(e.keyCode==40){if($("#"+t.data("id")).hasClass("active")){e.preventDefault();var i=$("#"+t.data("id")).find("a");if(o<i.length-1){o++}var a=i[o];a.focus()}}else if(e.keyCode==9){if($("#"+t.data("id")).hasClass("active")){var i=$("#"+t.data("id")).find("a");if(o<i.length-1&&!f){o++;var a=i[o];a.focus();e.preventDefault()}else if(f){if(o>0){o--;var a=i[o];a.focus()}else{o--;$(".simple-dd").removeClass("active");t.find("a").first().focus()}e.preventDefault()}else{o++;if(t.data("next")){$(t.data("next")).find("a").focus();$(".simple-dd").removeClass("active");e.preventDefault()}else{t.find("a").focus();$(".simple-dd").removeClass("active")}}}}else if(e.keyCode==38){if($("#"+t.data("id")).hasClass("active")){e.preventDefault();var i=$("#"+t.data("id")).find("a");if(o>0){o--}var a=i[o];a.focus()}}else if(e.keyCode==27){if($("#"+t.data("id")).hasClass("active")){$(".simple-dd").removeClass("active")}}})});this.jqElem.addClass("dropasaurusised")}};$.fn[a]=function(e){return this.each(function(){if(!$.data(this,"plugin_"+a)){$.data(this,"plugin_"+a,new d(this,e))}})}})(jQuery,window,document);
