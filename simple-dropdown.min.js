;(function(e,i){if(typeof define==="function"&&define.amd)define(["jquery","./../body-toucher/body-toucher","./../gush/gush"],i);else if(typeof exports==="object")module.exports=i(require("jquery"),require("./../body-toucher/body-toucher"),require("./../gush/gush"));else{i(e.jQuery)}})(this,function($,e,i,t){"use strict";$(function(){var e="simpleDropdown",i={touchBody:true};function t(t,s){this.element=t;this.jqElem=$(t);this.options=$.extend({},i,s);this._defaults=i;this._name=e;if(!this.jqElem.is(".dropasaurusised, .simple-dd-generated"))this.init()}t.prototype={init:function(){if(this.options.touchBody)$.addBody();var e=this.jqElem,i=this,t=this.jqElem;e.each(function(){var e=$(this);var i=e.find("ul");var s=i.parent();var a=i.remove();$.scrollElem().append(a);var d=s.offset().top+s.height();a.wrap('<div class="simple-dd simple-dd-generated '+(e.is(".pin-right")?"pin-right":"")+'"'+'     id="'+e.data("id")+'"></div>');$(window).on("resize",function(){var i={position:"absolute",top:d};if(e.is(".pin-right")){i["left"]=s.offset().left-a.outerWidth()+s.outerWidth()}else{i["left"]=s.offset().left}a.parent().css(i)});var o=-1;e.find("a").first().click(function(i){i.preventDefault();i.stopPropagation();o=-1;if($("#"+e.data("id")).hasClass("active")){$(".simple-dd").removeClass("active");t.removeClass("active");return}$(".simple-dd").removeClass("active");e.trigger("probable_change");$("#"+e.data("id")).toggleClass("active");t.toggleClass("active");$(window).trigger("resize")});$("html").click(function(e){$(".simple-dd").removeClass("active")});var r=false;$(document).keyup(function(e){if(e.keyCode==16){r=false}});$(document).keydown(function(i){if(i.keyCode==16){r=true}else if(i.keyCode==40){if($("#"+e.data("id")).hasClass("active")){i.preventDefault();var t=$("#"+e.data("id")).find("a");if(o<t.length-1){o++}var s=t[o];s.focus()}}else if(i.keyCode==9){if($("#"+e.data("id")).hasClass("active")){var t=$("#"+e.data("id")).find("a");if(o<t.length-1&&!r){o++;var s=t[o];s.focus();i.preventDefault()}else if(r){if(o>0){o--;var s=t[o];s.focus()}else{o--;$(".simple-dd").removeClass("active");e.find("a").first().focus()}i.preventDefault()}else{o++;if(e.data("next")){$(e.data("next")).find("a").focus();$(".simple-dd").removeClass("active");i.preventDefault()}else{e.find("a").focus();$(".simple-dd").removeClass("active")}}}}else if(i.keyCode==38){if($("#"+e.data("id")).hasClass("active")){i.preventDefault();var t=$("#"+e.data("id")).find("a");if(o>0){o--}var s=t[o];s.focus()}}else if(i.keyCode==27){if($("#"+e.data("id")).hasClass("active")){$(".simple-dd").removeClass("active")}}})});this.jqElem.addClass("dropasaurusised")}};$.fn[e]=function(i){return this.each(function(){if(!$.data(this,"plugin_"+e)){$.data(this,"plugin_"+e,new t(this,i))}})}})});
