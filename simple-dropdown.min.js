;(function(e,t){if(typeof define==="function"&&define.amd)define(["jquery","./../body-toucher/body-toucher","./../gush/gush"],t);else if(typeof exports==="object")module.exports=t(require("jquery"),require("./../body-toucher/body-toucher"),require("./../gush/gush"));else{t(e.jQuery)}})(this,function($,e,t,i){"use strict";$(function(){var e="simpleDropdown",t={touchBody:true};function i(i,s){this.element=i;this.jqElem=$(i);this.options=$.extend({},t,s);this._defaults=t;this._name=e;if(!this.jqElem.is(".droposaurusised, .simple-dd-generated"))this.init()}i.prototype={init:function(){if(this.options.touchBody)$.addBody();var e=this.jqElem,t=this,i=this.jqElem;e.each(function(){var e=$(this),t=e.find("ul"),s=t.parent(),a=t.detach();$.scrollElem().append(a);var d=s.offset().top+s.height()+$.scrollElem().scrollTop();a.wrap('<div class="simple-dd simple-dd-generated '+(e.is(".pin-right")?"pin-right":"")+'"'+'     id="'+e.attr("data-id")+'"></div>');$(window).on("resize",function(){var t={position:"absolute",top:s.offset().top+s.height()+$.scrollElem().scrollTop()};if(e.is(".pin-right")){t["left"]=s.offset().left-a.outerWidth()+s.outerWidth()}else{t["left"]=s.offset().left}a.parent().css(t)});var o=-1;e.find("a").first().off("click.smpdd").on("click.smpdd",function(t){t.preventDefault();t.stopPropagation();o=-1;if($("#"+e.attr("data-id")).hasClass("active")){$(".simple-dd").removeClass("active");i.removeClass("active");return}$(".simple-dd").removeClass("active");e.trigger("probable_change");$("#"+e.attr("data-id")).addClass("active");i.addClass("active");$(window).trigger("resize")});$("html").off("click.smpdd").on("click.smpdd",function(e){$(".simple-dd").removeClass("active")});var r=false;$(document).keyup(function(e){if(e.keyCode==16){r=false}});$(document).keydown(function(t){if(t.keyCode==16){r=true}else if(t.keyCode==40){if($("#"+e.attr("data-id")).hasClass("active")){t.preventDefault();var i=$("#"+e.attr("data-id")).find("a");if(o<i.length-1){o++}var s=i[o];s.focus()}}else if(t.keyCode==9){if($("#"+e.attr("data-id")).hasClass("active")){var i=$("#"+e.attr("data-id")).find("a");if(o<i.length-1&&!r){o++;var s=i[o];s.focus();t.preventDefault()}else if(r){if(o>0){o--;var s=i[o];s.focus()}else{o--;$(".simple-dd").removeClass("active");e.find("a").first().focus()}t.preventDefault()}else{o++;if(e.data("next")){$(e.data("next")).find("a").focus();$(".simple-dd").removeClass("active");t.preventDefault()}else{e.find("a").focus();$(".simple-dd").removeClass("active")}}}}else if(t.keyCode==38){if($("#"+e.attr("data-id")).hasClass("active")){t.preventDefault();var i=$("#"+e.attr("data-id")).find("a");if(o>0){o--}var s=i[o];s.focus()}}else if(t.keyCode==27){if($("#"+e.attr("data-id")).hasClass("active")){$(".simple-dd").removeClass("active")}}})});this.jqElem.addClass("droposaurusised").trigger("droposaurusised")}};$.fn[e]=function(t){return this.each(function(){if(!$.data(this,"plugin_"+e)){$.data(this,"plugin_"+e,new i(this,t))}})}})});
