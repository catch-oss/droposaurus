;(function($,t,a,e){var i="catchDropdown",d={touchBody:true};function s(t,a){this.element=t;this.jqElem=$(t);this.options=$.extend({},d,a);this._defaults=d;this._name=i;if(!this.jqElem.is(".dropasaurusised"))this.init()}s.prototype={scrollElem:function(){return $(".body").length?$(".body"):$(t)},init:function(){var t=this.jqElem,e=this;if(this.options.touchBody)$.addBody();t.each(function(){var t=$(this).wrap('<div class="dropdown-wrapper'+($(this).data("size")?" size"+$(this).data("size"):"")+'"></div>'),i=t.parent(),d=(t.attr("class")||"").replace("select-invisible",""),s='<label aria-hidden="true" class="'+(t.data("error ")?"error":"")+d+'"><span class="span-label'+(t.data("hideLabel")?" hidden":"")+'">'+(!t.data("mobile-only-label")&&t.data("label")||"")+"</span>"+'<div class="btn-dd">'+'<a href="" class="input btn-dd-select phone-type icon-chevron-fat-down'+(t.data("selected")?" populated":"")+'" tabindex="0">'+'<span class="main"'+(t.data("placeholder-color")?' style="color:'+t.data("placeholder-color")+'"':"")+">"+t.data("placeholder")+"</span>"+(t.data("subtext")?"<span class='sub'>"+t.data("subtext")+"</span>":"")+"</a>"+'<div class="btn-dd-options">'+'<div class="btn-dd-header">'+t.data("label")+' <a class="btn-dd-close">Close</a>'+"</div>"+"<ul></ul>"+"</div>"+"</div>"+"</label>";t.after(s);t.addClass("hidden");e.update();i.find("ul").gush({x:false,move:{stopPropagation:true}});$("html").click(function(t){i.find(".btn-dd").removeClass("active");e.scrollElem().removeClass("no-overflow")});var n=-1;$(a).on("keydown.dropasaur",function(a){if(a.keyCode==40){if(i.find(".btn-dd.active").length){a.preventDefault();var d=i.find(".btn-dd-option a");if(n<d.length-1){n++}var s=d[n];s.focus();t.find('option[value="'+$(s).data("value")+'"]').prop("selected",true);t.trigger("change");t.trigger("changeDrop",[$(s).data("value")])}}else if(a.keyCode==38){if(i.find(".btn-dd.active").length){a.preventDefault();var d=i.find(".btn-dd-option a");if(n>0){n--}var s=d[n];s.focus();t.find('option[value="'+$(s).data("value")+'"]').prop("selected",true);t.trigger("change");t.trigger("changeDrop",[$(s).data("value")])}}else if(a.keyCode==9){var l=i.find(".btn-dd.active");if(l.length){var o=t.find('option[value="'+t.val()+'"]');a.preventDefault();l.removeClass("active");e.scrollElem().removeClass("no-overflow");l.find("a").first().addClass("populated");l.find("a").first().focus();l.find("a .main").first().text(o.text());if(l.find("a .sub").length==0){l.find("a").append('<span class="sub"></span>')}l.find("a .sub").first().text(t.data("subtext")||o.data("subtext")||"")}}else if(a.keyCode==13){var l=i.find(".btn-dd.active");if(l.length){var o=t.find('option[value="'+t.val()+'"]');a.preventDefault();l.removeClass("active");e.scrollElem().removeClass("no-overflow");l.find("a").first().addClass("populated");l.find("a").first().focus();l.find("a .main").first().text(o.text());if(l.find("a .sub").length==0){l.find("a").append('<span class="sub"></span>')}l.find("a .sub").first().text(t.data("subtext")||o.data("subtext")||"")}}})});this.jqElem.addClass("dropasaurusised")},update:function(t){var a=this.jqElem,i=this,d,s,n;a.each(function(){var a=$(this),l=a.closest(".dropdown-wrapper");if(typeof t=="object"){a.html("");for(n=0;n<t.length;n++){s=t[n];a.append('<option value="'+s.value+'" data-subtext="'+s.subtext+'">'+(s.innerHTML?s.innerHTML:s.value)+"<option>")}}else if(typeof t=="string"){a.html(t)}if(t!=e)l.find("ul").html("");if(a.attr("allow-empty")=="true"||a.attr("data-allow-empty")=="true"){a.prepend('<option value=""></option>');l.find("ul").append('<li class="dd-empty-option input btn-dd-option catch-dropdown-item"><a class="catch-dropdown-link" href="" tabindex="-1" data-value=""></a></li>')}a.find("option").each(function(){var t=$(this),i=t.text(),d=t.attr("value")===e?"":t.attr("value"),s=a.data("selected")===e?"":a.data("selected");if(t.text()!=""){l.find("ul").append('<li class="input btn-dd-option catch-dropdown-item">'+'<a class="catch-dropdown-link'+(i=="Add Connection"?" btn--add btn--icon icon-add icon-after":"")+(s==d?" selected":"")+'" '+'href="" '+'tabindex="-1" '+'data-value="'+d+'">'+'<span class="main">'+i+"</span>"+(t.data("subtext")?'<span class="sub">'+t.data("subtext")+"</span>":"")+"</a>"+"</li>")}});if(a.data("selected")===e){d=a.find("option[selected]");if(!d.length)d=a.find('option[value="'+a.val()+'"]');if(!d.length)d=a.find("option").first()}else{d=a.find('option[value="'+a.data("selected")+'"]');if(!d.length){a.find("option").each(function(){var t=$(this).attr("value")===e?"":$(this).attr("value");if(a.data("selected")==t)d=$(this)})}}d.prop("selected",true);a.trigger("change");l.find(".btn-dd-select .main").first().text(d.text()||a.data("placeholder")||"");if(l.find(".btn-dd-select .sub").length==0){l.find(".btn-dd-select").append('<span class="sub"></span>')}l.find(".btn-dd-select .sub").first().text(a.data("subtext")||d.data("subtext")||"");l.find(".btn-dd").off("click.dropasaur").on("click.dropasaur",function(t){t.preventDefault();t.stopPropagation();if($(this).hasClass("disabled")){return}if(!$(this).hasClass("active")){$(".btn-dd").removeClass("active")}a.trigger("probable_change");var e=a.val();$(this).find("li a").each(function(){$(this).toggleClass("selected",e==$(this).data("value"))});$(this).toggleClass("active");i.scrollElem().toggleClass("no-overflow");$(this).find("a").first().addClass("populated")});l.find("li a").off("click.dropasaur").on("click.dropasaur",function(t){t.preventDefault();t.stopPropagation();var e=a.find('option[value="'+$(this).data("value")+'"]').prop("selected",true);l.find(".btn-dd-select .main").first().text($(this).find(".main").text());if(l.find(".btn-dd-select .sub").length==0){l.find(".btn-dd-select").append('<span class="sub"></span>')}l.find(".btn-dd-select .sub").first().text(a.data("subtext")||e.data("subtext")||"");a.trigger("change");i.scrollElem().removeClass("no-overflow");l.find(".btn-dd").toggleClass("active").find("a").first().addClass("populated")})})},setDisabled:function(t){this.jqElem.parent().find(".btn-dd").toggleClass("disabled",t)}};$.fn[i]=function(t,a){return this.each(function(){if(!$.data(this,"plugin_"+i)){$.data(this,"plugin_"+i,new s(this,t))}else if(t=="update"){$.data(this,"plugin_"+i).update(a)}else if(t=="setDisabled"){$.data(this,"plugin_"+i).setDisabled(a)}})}})(jQuery,window,document);
