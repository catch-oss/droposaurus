;(function($,t,a,e){var n="catchDropdown",i={propertyName:"value"};function s(t,a,e){this.element=t;this.jqElem=$(t);this.options=$.extend({},i,a);this._defaults=i;this._name=n;if(!this.jqElem.is(".dropasaurusised"))this.init();if(a=="update")this.update(e)}s.prototype={init:function(){var t=this.jqElem,e=this;$.addBody();t.each(function(){var t=$(this),n=t.parent(),i=(t.attr("class")||"").replace("select-invisible",""),s='<label class="'+(t.data("error ")?"error":"")+i+'"><span class="span-label'+(t.data("hideLabel")?" hidden":"")+'">'+(!t.data("mobile-only-label")&&t.data("label")||"")+"</span>"+'<div class="btn-dd">'+'<a href="" class="input btn-dd-select phone-type icon-chevron-fat-down'+(t.data("selected")?" populated":"")+'" tabindex="10">'+'<span class="main">'+t.data("placeholder")+"</span>"+(t.data("subtext")?"<span class='sub'>"+t.data("subtext")+"</span>":"")+"</a>"+'<div class="btn-dd-options">'+'<div class="btn-dd-header">'+t.data("label")+' <a class="btn-dd-close">Close</a>'+"</div>"+"<ul></ul>"+"</div>"+"</div>"+"</label>";t.wrap('<div class="dropdown-wrapper"></div>');t.after(s);t.addClass("hidden");e.update();n.find("ul").gush({x:false,move:{stopPropagation:true}});$("html").click(function(t){n.find(".btn-dd").removeClass("active");$(".body").removeClass("no-overflow")});var d=-1;$(a).on("keydown.dropasaur",function(a){if(a.keyCode==40){if(n.find(".btn-dd.active").length){a.preventDefault();var e=n.find(".btn-dd-option a");if(d<e.length-1){d++}var i=e[d];i.focus();t.find('option[value="'+$(i).data("value")+'"]').prop("selected",true);t.trigger("change")}}else if(a.keyCode==38){if(n.find(".btn-dd.active").length){a.preventDefault();var e=n.find(".btn-dd-option a");if(d>0){d--}var i=e[d];i.focus();t.find('option[value="'+$(i).data("value")+'"]').prop("selected",true);t.trigger("change")}}else if(a.keyCode==9){var s=n.find(".btn-dd.active");if(s.length){var l=t.find('option[value="'+t.val()+'"]');a.preventDefault();s.removeClass("active");$(".body").removeClass("no-overflow");s.find("a").first().addClass("populated");s.find("a").first().focus();s.find("a .main").first().text(l.text());if(s.find("a .sub").length==0){s.find("a").append('<span class="sub"></span>')}s.find("a .sub").first().text(t.data("subtext")||l.data("subtext")||"")}}else if(a.keyCode==13){var s=n.find(".btn-dd.active");if(s.length){var l=t.find('option[value="'+t.val()+'"]');a.preventDefault();s.removeClass("active");$(".body").removeClass("no-overflow");s.find("a").first().addClass("populated");s.find("a").first().focus();s.find("a .main").first().text(l.text());if(s.find("a .sub").length==0){s.find("a").append('<span class="sub"></span>')}s.find("a .sub").first().text(t.data("subtext")||l.data("subtext")||"")}}})});this.jqElem.addClass("dropasaurusised")},update:function(t){var a=this.jqElem,e,n,i;a.each(function(){var a=$(this),s=a.parent();if(typeof t=="object"){a.html("");for(i=0;i<t.length;i++){n=t[i];a.append('<option value="'+n.value+'" data-subtext="'+n.subtext+'">'+(n.innerHTML?n.innerHTML:n.value)+"<option>")}}else if(typeof t=="string"){a.html(t)}a.prepend('<option value=""></option>');if(a.attr("allow-empty")=="true"){s.find("ul").append('<li class="input btn-dd-option catch-dropdown-item"><a class="catch-dropdown-link" href="" tabindex="-1" data-value="">&nbsp;</a></li>')}a.find("option").each(function(){if($(this).val()!=""){s.find("ul").append('<li class="input btn-dd-option catch-dropdown-item"><a class="catch-dropdown-link'+($(this).text()=="Add Connection"?" btn--add btn--icon icon-add icon-after":"")+(a.data("selected")==$(this).val()?" selected":"")+'" href="" tabindex="-1" data-value="'+$(this).val()+'">'+'<span class="main">'+$(this).text()+"</span>"+($(this).data("subtext")?'<span class="sub">'+$(this).data("subtext")+"</span>":"")+"</a></li>")}});e=a.data("selected")?a.find('option[value="'+a.data("selected")+'"]'):a.find("option").first();e.prop("selected",true);a.trigger("change");s.find(".btn-dd-select .main").first().text(e.text()||a.data("placeholder")||"&nbsp;");if(s.find(".btn-dd-select .sub").length==0){s.find(".btn-dd-select").append('<span class="sub"></span>')}s.find(".btn-dd-select .sub").first().text(a.data("subtext")||e.data("subtext")||"");s.find(".btn-dd").off("click.dropasaur").on("click.dropasaur",function(t){if(!$(this).hasClass("active")){$(".btn-dd").removeClass("active")}t.preventDefault();t.stopPropagation();a.trigger("probable_change");var e=a.val();$(this).find("li a").each(function(){$(this).toggleClass("selected",e==$(this).data("value"))});$(this).toggleClass("active");$(".body").toggleClass("no-overflow");$(this).find("a").first().addClass("populated")});s.find("li a").off("click.dropasaur").on("click.dropasaur",function(t){t.preventDefault();var e=a.find('option[value="'+$(this).data("value")+'"]').prop("selected",true);s.find(".btn-dd-select .main").first().text($(this).find(".main").text());if(s.find(".btn-dd-select .sub").length==0){s.find(".btn-dd-select").append('<span class="sub"></span>')}s.find(".btn-dd-select .sub").first().text(a.data("subtext")||e.data("subtext")||"");a.trigger("change")})})}};$.fn[n]=function(t,a){return this.each(function(){if(!$.data(this,"plugin_"+n)){$.data(this,"plugin_"+n,new s(this,t,a))}})}})(jQuery,window,document);
