;(function($,t,a,e){var s="catchDropdown",n={propertyName:"value"};function d(t,a){this.element=t;this.jqElem=$(t);this.options=$.extend({},n,a);this._defaults=n;this._name=s;if(!this.jqElem.is(".dropasaurusised"))this.init()}d.prototype={init:function(){$.addBody();var t=this.jqElem;t.each(function(){var t=$(this);var e=t.attr("class")||"";e=e.replace("select-invisible","");var s='<label class="'+(t.data("error ")?"error":"")+e+'"><span class="span-label'+(t.data("hideLabel")?" hidden":"")+'">'+(!t.data("mobile-only-label")&&t.data("label")||"")+"</span>"+'<div class="btn-dd">'+'<a href="" class="input btn-dd-select phone-type icon-chevron-fat-down'+(t.data("selected")?" populated":"")+'" tabindex="10">'+'<span class="main">'+t.data("placeholder")+"</span>"+(t.data("subtext")?"<span class='sub'>"+t.data("subtext")+"</span>":"")+"</a>"+'<div class="btn-dd-options">'+'<div class="btn-dd-header">'+t.data("label")+' <a class="btn-dd-close">Close</a>'+"</div>"+"<ul>"+"</ul>"+"</div>"+"</div></label>";t.wrap('<div class="dropdown-wrapper"></div>');var n=t.parent();t.after(s);t.addClass("hidden");t.prepend('<option value=""></option>');if(t.attr("allow-empty")=="true"){n.find("ul").append('<li class="input btn-dd-option catch-dropdown-item"><a class="catch-dropdown-link" href="" tabindex="-1" data-value="">&nbsp;</a></li>')}t.find("option").each(function(){if($(this).val()!=""){n.find("ul").append('<li class="input btn-dd-option catch-dropdown-item"><a class="catch-dropdown-link'+($(this).text()=="Add Connection"?" btn--add btn--icon icon-add icon-after":"")+(t.data("selected")==$(this).val()?" selected":"")+'" href="" tabindex="-1" data-value="'+$(this).val()+'">'+'<span class="main">'+$(this).text()+"</span>"+($(this).data("subtext")?'<span class="sub">'+$(this).data("subtext")+"</span>":"")+"</a></li>")}});sel=t.data("selected")?t.find('option[value="'+t.data("selected")+'"]'):t.find("option").first();sel.prop("selected",true);t.trigger("change");n.find(".btn-dd-select .main").first().text(sel.text()||t.data("placeholder")||"&nbsp;");if(n.find(".btn-dd-select .sub").length==0){n.find(".btn-dd-select").append('<span class="sub"></span>')}n.find(".btn-dd-select .sub").first().text(t.data("subtext")||sel.data("subtext")||"");n.find(".btn-dd").click(function(a){if(!$(this).hasClass("active")){$(".btn-dd").removeClass("active")}a.preventDefault();a.stopPropagation();t.trigger("probable_change");var e=t.val();$(this).find("li a").each(function(){$(this).toggleClass("selected",e==$(this).data("value"))});$(this).toggleClass("active");$(".body").toggleClass("no-overflow");$(this).find("a").first().addClass("populated")});n.find("li a").click(function(a){a.preventDefault();var e=t.find('option[value="'+$(this).data("value")+'"]').prop("selected",true);n.find(".btn-dd-select .main").first().text($(this).find(".main").text());if(n.find(".btn-dd-select .sub").length==0){n.find(".btn-dd-select").append('<span class="sub"></span>')}n.find(".btn-dd-select .sub").first().text(t.data("subtext")||e.data("subtext")||"");t.trigger("change")});n.find("ul").gush({x:false,move:{stopPropagation:true}});$("html").click(function(t){n.find(".btn-dd").removeClass("active");$(".body").removeClass("no-overflow")});var d=-1;$(a).keydown(function(a){if(a.keyCode==40){if(n.find(".btn-dd.active").length){a.preventDefault();var e=n.find(".btn-dd-option a");if(d<e.length-1){d++}var s=e[d];s.focus();t.find('option[value="'+$(s).data("value")+'"]').prop("selected",true);t.trigger("change")}}else if(a.keyCode==38){if(n.find(".btn-dd.active").length){a.preventDefault();var e=n.find(".btn-dd-option a");if(d>0){d--}var s=e[d];s.focus();t.find('option[value="'+$(s).data("value")+'"]').prop("selected",true);t.trigger("change")}}else if(a.keyCode==9){var i=n.find(".btn-dd.active");if(i.length){var l=t.find('option[value="'+t.val()+'"]');a.preventDefault();i.removeClass("active");$(".body").removeClass("no-overflow");i.find("a").first().addClass("populated");i.find("a").first().focus();i.find("a .main").first().text(l.text());if(i.find("a .sub").length==0){i.find("a").append('<span class="sub"></span>')}i.find("a .sub").first().text(t.data("subtext")||l.data("subtext")||"")}}else if(a.keyCode==13){var i=n.find(".btn-dd.active");if(i.length){var l=t.find('option[value="'+t.val()+'"]');a.preventDefault();i.removeClass("active");$(".body").removeClass("no-overflow");i.find("a").first().addClass("populated");i.find("a").first().focus();i.find("a .main").first().text(l.text());if(i.find("a .sub").length==0){i.find("a").append('<span class="sub"></span>')}i.find("a .sub").first().text(t.data("subtext")||l.data("subtext")||"")}}})});this.jqElem.addClass("dropasaurusised")}};$.fn[s]=function(t){return this.each(function(){if(!$.data(this,"plugin_"+s)){$.data(this,"plugin_"+s,new d(this,t))}})}})(jQuery,window,document);
